function drawtextwrapped(window, text, rect, linespacing, color)if ~exist('rect', 'var') | isempty(rect)	rect=screen(window, 'Rect');endif ~exist('color', 'var') | isempty(color)	color=[255 255 255];endif ~exist('linespacing', 'var') | isempty(linespacing)	linespacing=1.5;endfontsize=SCREEN(window,'TextSize');if fontsize==0	fontsize=12;endfontwidth=fontsize*.55; % is there a better way?width=RectWidth(rect);maxlinelength=floor(width/(fontwidth));wrappedstring = WrapString(text,maxlinelength);cr=sprintf('\n');breaks=[0 find(wrappedstring==cr) length(wrappedstring)];x=rect(1);y=rect(2);for i=2:length(breaks);	string=wrappedstring(breaks(i-1)+1:breaks(i));	SCREEN(window,'DrawText',string,x,y+(i-1)*linespacing*fontsize, color);end