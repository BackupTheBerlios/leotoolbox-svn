function [w, rect]=setupwindow(whichScreen, width, height, hz, pixelSize,isColor)% open a window of particular size and refresh rate%open screenres=NearestResolution1(whichScreen,width, height, hz, pixelSize);[w,rect]=SCREEN(whichScreen,'OpenWindow',0,[],res);pixelSizes=SCREEN(whichScreen,'PixelSizes');if max(pixelSizes)<pixelSize	fprintf('Sorry, I need a screen that supports %d-bit pixelSize.\n', pixelSize);	SCREEN(w, 'close');	w=-1;	return;end[oldPixelSize,oldIsColor,pages]=SCREEN(w,'PixelSize',pixelSize,isColor);oldBoolean=SCREEN(w,'Preference','SetClutDriverWaitsForBlanking',1);gray=GrayIndex(w, 0.5);SCREEN(w,'FillRect',gray);