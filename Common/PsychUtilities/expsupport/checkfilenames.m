function [myerr,par]=checkfilenames(par)myerr=1;if ~exist('par', 'var') | isempty(par)	par=[];	fprintf('checkfilenames: no or empty parameter file\n');	returnend% Check input filenameif isfield(par, 'infile') & ~isempty(par.infile)	[par.infilename, exists, err]=checkFileExistence(par.infile, par.indir, par.inextension, 'in' );	if exists==0 | err==1		fprintf('checkfilenames: error opening input file.\n' );		return	endend% Check output filenamesif isfield(par, 'infile') & ~isempty(par.infile) & isfield(par, 'outfile') & ~isempty(par.outfile)		outputfilename=[par.outfile '_' par.infile];	% output file	[par.outfilename, exists, err]=checkFileExistence(outputfilename, par.outdir, par.outextension, 'out');	if exists==1 | err==1		fprintf('checkfilenames: error creating output file.\n' );		return	else		fprintf('Saving output to ''%s''.\n', par.outfilename );	end	% trial file	[par.trialfilename, exists, err]=checkFileExistence(outputfilename, par.trialdir, par.trialextension, 'out');	if exists==1 | err==1		fprintf('checkfilenames: error creating trial file.\n' );		return	else		fprintf('Saving trial data to ''%s''.\n', par.trialfilename );	end	% log file	[par.logfilename, exists, err]=checkFileExistence(outputfilename, par.logdir, par.logextension, 'out');	if exists==1 | err==1		fprintf('checkfilenames: error creating log file.\n' );		return	else		fprintf('Saving log info to ''%s''.\n', par.logfilename );	endend% Check EDF filename.if isfield(par, 'edffile') & ~isempty(par.edffile)	[par.edffilenamecopy, exists, err]=checkFileExistence(par.edffile, par.locedfdir, par.edfextension, 'out');	if exists==1 | err==1		fprintf('checkfilenames: error creating local edf filename copy.\n' );		return	end	fp=fopen(par.edffilenamecopy,'a');	fprintf( fp, 'Copy of EDF filename for output file ''%s''.\n', par.outfilename);	fprintf( fp, 'Copy of EDF filename for trial file ''%s''.\n', par.trialfilename);	fprintf( fp, 'Created at ''%s''.\n', datestr(now,0));	fclose(fp);	par.edffilename=[par.edffile '.edf']; % for eyelink%else	fprintf('Saving EDF data to ''%s''.\n', par.edffilename );	endmyerr=0;