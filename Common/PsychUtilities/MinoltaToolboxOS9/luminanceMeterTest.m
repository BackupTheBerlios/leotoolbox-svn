% luminanceMeterTest% Test program for reading responses from the Minolta LS-110 luminance meter% sofar best results with Minolta set to "Fast" response% % Part of Minolta toolbox% Send comments and bug reports to: f.w.cornelissen@med.rug.nl% history% fwc created first version in 2000% 20-01-2002	fwc updated for new version of Minolta Toolboxclear all;port=-1; % set to -1 to get to choose a port, 0 to simulateprintmessage=1; % print additional measurement informationmodifierkeyname='apple';quitkeyname='esc';modifierkey=KbName(modifierkeyname);quitkey=KbName(quitkeyname);fprintf('Test program for the Minolta LS-110 luminance meter.\n\n');fprintf('Looking for a luminance meter....\n');minolta=initLuminanceMeter(port);if minolta.port < 0		fprintf('Luminance meter not found.\n');	return;endfprintf('Starting measurements.\n');fprintf('Press ''%s''+''%s'' to quit.\n\n', modifierkeyname, quitkeyname);i=1;if printmessage==1	fprintf('\nReading\tLuminance\tTime\tmessage\n');else	fprintf('\nReading\tLuminance\tTime\n');end	while 1	[lum, message,time]=getLuminance(minolta);	if lum == -1;		break;	end	if printmessage==1		fprintf('%d\t%.2f\t%.1f\t%s\n', i, lum, time, message);	else		fprintf('%d\t%.2f\t%.1f\n', i, lum, time);	end	i=i+1;		[keyIsDown,secs,keyCode] = KbCheck;	if keyCode(modifierkey) & keyCode(quitkey)		break;	endendcloseLuminanceMeter(minolta);FlushEvents('keyDown');	% discard all the chars from the Event Manager queue.fprintf('\nBye!\n\n');